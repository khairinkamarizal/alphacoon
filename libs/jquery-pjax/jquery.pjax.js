!function(f){function t(t,n,a){var r=this;return this.on("click.pjax",t,function(t){var e=f.extend({},p(n,a));e.container||(e.container=f(this).attr("data-pjax")||r),o(t,e)})}function o(t,e,n){n=p(e,n);var a=t.currentTarget;if("A"!==a.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol===a.protocol&&location.hostname===a.hostname&&(-1<a.href.indexOf("#")&&c(a)==c(location)||t.isDefaultPrevented()||(e={url:a.href,container:f(a).attr("data-pjax"),target:a},e=f.extend({},e,n),n=f.Event("pjax:click"),f(a).trigger(n,[e]),n.isDefaultPrevented()||(h(e),t.preventDefault(),f(a).trigger("pjax:clicked",[e]))))}function e(t,e,n){n=p(e,n);var a=t.currentTarget;if("FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";e={type:a.method.toUpperCase(),url:a.action,container:f(a).attr("data-pjax"),target:a};if("GET"!==e.type&&void 0!==window.FormData)e.data=new FormData(a),e.processData=!1,e.contentType=!1;else{if(f(a).find(":file").length)return;e.data=f(a).serializeArray()}h(f.extend({},e,n)),t.preventDefault()}function h(u){u=f.extend(!0,{},f.ajaxSettings,h.defaults,u),f.isFunction(u.url)&&(u.url=u.url());var n,a=u.target,l=v(u.url).hash,p=u.context=y(u.container);function d(t,e,n){(n=n||{}).relatedTarget=a;n=f.Event(t,n);return p.trigger(n,e),!n.isDefaultPrevented()}u.data||(u.data={}),f.isArray(u.data)?u.data.push({name:"_pjax",value:p.selector}):u.data._pjax=p.selector,u.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",p.selector),!d("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(n=setTimeout(function(){d("pjax:timeout",[t,u])&&t.abort("timeout")},e.timeout),e.timeout=0);e=v(e.url);l&&(e.hash=l),u.requestUrl=s(e)},u.complete=function(t,e){n&&clearTimeout(n),d("pjax:complete",[t,e,u]),d("pjax:end",[t,u])},u.error=function(t,e,n){var a=b("",t,u),n=d("pjax:error",[t,e,n,u]);"GET"==u.type&&"abort"!==e&&n&&m(a.url)},u.success=function(t,e,n){var a=h.state,r="function"==typeof f.pjax.defaults.version?f.pjax.defaults.version():f.pjax.defaults.version,o=n.getResponseHeader("X-PJAX-Version"),i=b(t,n,u),s=v(i.url);if(l&&(s.hash=l,i.url=s.href),r&&o&&r!==o)m(i.url);else if(i.contents){h.state={id:u.id||g(),url:i.url,title:i.title,container:p.selector,fragment:u.fragment,timeout:u.timeout},(u.push||u.replace)&&window.history.replaceState(h.state,i.title,i.url);try{document.activeElement.blur()}catch(t){}i.title&&(document.title=i.title),d("pjax:beforeReplace",[i.contents,u],{state:h.state,previousState:a}),p.html(i.contents);var c,o=p.find("input[autofocus], textarea[autofocus]").last()[0];o&&document.activeElement!==o&&o.focus(),(a=i.scripts)&&(c=f("script[src]"),a.each(function(){var t,e,n=this.src;c.filter(function(){return this.src===n}).length||(t=document.createElement("script"),(e=f(this).attr("type"))&&(t.type=e),t.src=f(this).attr("src"),document.head.appendChild(t))}));o=u.scrollTo;l&&(a=decodeURIComponent(l.slice(1)),(a=document.getElementById(a)||document.getElementsByName(a)[0])&&(o=f(a).offset().top)),"number"==typeof o&&f(window).scrollTop(o),d("pjax:success",[t,e,n,u])}else m(i.url)},h.state||(h.state={id:g(),url:window.location.href,title:document.title,container:p.selector,fragment:u.fragment,timeout:u.timeout},window.history.replaceState(h.state,document.title)),x(h.xhr),h.options=u;var t,e,r=h.xhr=f.ajax(u);return 0<r.readyState&&(u.push&&!u.replace&&(t=h.state.id,e=j(p),T[t]=e,S.push(t),P(E,0),P(S,h.defaults.maxCacheLength),window.history.pushState(null,"",u.requestUrl)),d("pjax:start",[r,u]),d("pjax:send",[r,u])),h.xhr}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return h(f.extend(n,p(t,e)))}function m(t){window.history.replaceState(null,"",h.state.url),window.location.replace(t)}var u=!0,l=window.location.href,a=window.history.state;function r(t){u||x(h.xhr);var e,n,a=h.state,r=t.state;if(r&&r.container){if(u&&l==r.url)return;if(a){if(a.id===r.id)return;o=a.id<r.id?"forward":"back"}var o,i=T[r.id]||[],s=f(i[0]||r.container),c=i[1];s.length?(a&&(e=o,t=a.id,i=j(s),T[t]=i,e="forward"===e?(n=S,E):(n=E,S),n.push(t),(t=e.pop())&&delete T[t],P(n,h.defaults.maxCacheLength)),o=f.Event("pjax:popstate",{state:r,direction:o}),s.trigger(o),o={id:r.id,url:r.url,container:s,push:!1,fragment:r.fragment,timeout:r.timeout,scrollTo:!1},c?(s.trigger("pjax:start",[null,o]),(h.state=r).title&&(document.title=r.title),a=f.Event("pjax:beforeReplace",{state:r,previousState:a}),s.trigger(a,[c,o]),s.html(c),s.trigger("pjax:end",[null,o])):h(o),s[0].offsetHeight):m(location.href)}u=!1}function i(t){var e=f.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",a=f("<form>",{method:"GET"===n?"GET":"POST",action:e,style:"display:none"});"GET"!==n&&"POST"!==n&&a.append(f("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var r,o=t.data;if("string"==typeof o)f.each(o.split("&"),function(t,e){e=e.split("=");a.append(f("<input>",{type:"hidden",name:e[0],value:e[1]}))});else if(f.isArray(o))f.each(o,function(t,e){a.append(f("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof o)for(r in o)a.append(f("<input>",{type:"hidden",name:r,value:o[r]}));f(document.body).append(a),a.submit()}function x(t){t&&t.readyState<4&&(t.onreadystatechange=f.noop,t.abort())}function g(){return(new Date).getTime()}function j(t){var e=t.clone();return e.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[t.selector,e.contents()]}function s(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),t.href.replace(/\?($|#)/,"$1")}function v(t){var e=document.createElement("a");return e.href=t,e}function c(t){return t.href.replace(/#.*/,"")}function p(t,e){return t&&e?e.container=t:e=f.isPlainObject(t)?t:{container:t},e.container&&(e.container=y(e.container)),e}function y(t){if((t=f(t)).length){if(""!==t.selector&&t.context===document)return t;if(t.attr("id"))return f("#"+t.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+t.selector}function d(t,e){return t.filter(e).add(t.find(e))}function w(t){return f.parseHTML(t,document,!0)}function b(t,e,n){var a,r,o={},i=/<html/i.test(t),e=e.getResponseHeader("X-PJAX-URL");return o.url=e?s(v(e)):n.requestUrl,i?(r=f(w(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),a=f(w(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))):r=a=f(w(t)),0===a.length||(o.title=d(r,"title").last().text(),n.fragment?(r="body"===n.fragment?a:d(a,n.fragment).first()).length&&(o.contents="body"===n.fragment?r:r.contents(),o.title||(o.title=r.attr("title")||r.data("title"))):i||(o.contents=a),o.contents&&(o.contents=o.contents.not(function(){return f(this).is("title")}),o.contents.find("title").remove(),o.scripts=d(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=f.trim(o.title))),o}a&&a.container&&(h.state=a),"state"in window.history&&(u=!1);var T={},E=[],S=[];function P(t,e){for(;t.length>e;)delete T[t.shift()]}function C(){return f("meta").filter(function(){var t=f(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function A(){f.fn.pjax=t,f.pjax=h,f.pjax.enable=f.noop,f.pjax.disable=D,f.pjax.click=o,f.pjax.submit=e,f.pjax.reload=n,f.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:C},f(window).on("popstate.pjax",r)}function D(){f.fn.pjax=function(){return this},f.pjax=i,f.pjax.enable=A,f.pjax.disable=f.noop,f.pjax.click=f.noop,f.pjax.submit=f.noop,f.pjax.reload=function(){window.location.reload()},f(window).off("popstate.pjax",r)}f.inArray("state",f.event.props)<0&&f.event.props.push("state"),f.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),(f.support.pjax?A:D)()}(jQuery);